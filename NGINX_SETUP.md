# Nginx & HTTPS Setup Guide (Google Cloud + Cloudflare)

This guide explains how to configure your Google Cloud VM to serve your application over HTTPS using Cloudflare Origin Certificates.

## Prerequisites
*   Access to Cloudflare Dashboard.
*   SSH access to your Google Cloud VM.
*   `sudo` privileges.

## Step 1: Generate Cloudflare Origin Certificate
1.  Go to **Cloudflare Dashboard** > Select your domain (`tellevoapp.com`).
2.  Navigate to **SSL/TLS** > **Origin Server**.
3.  Click **Create Certificate**.
4.  Keep default settings (RSA 2048, Hostnames: `*.tellevoapp.com`, `tellevoapp.com`).
5.  Click **Create**.
6.  **IMPORTANT:** Keep this window open. You will see the **Origin Certificate** and **Private Key**.

## Step 2: Install Nginx on VM
SSH into your VM and run:
```bash
sudo apt update
sudo apt install nginx -y
```

## Step 3: Save Certificates on VM
1.  Create the certificate file:
    ```bash
    sudo nano /etc/ssl/certs/admin.tellevoapp.com.pem
    ```
    *   Paste the **Origin Certificate** content from Cloudflare.
    *   Save (Ctrl+O, Enter) and Exit (Ctrl+X).

2.  Create the private key file:
    ```bash
    sudo nano /etc/ssl/private/admin.tellevoapp.com.key
    ```
    *   Paste the **Private Key** content from Cloudflare.
    *   Save and Exit.

## Step 4: Deploy Frontend Files
1.  Create the directory:
    ```bash
    sudo mkdir -p /var/www/admin-frontend
    ```
2.  Upload your local `dist/` folder (generated by `npm run build`) to `/var/www/admin-frontend` on the VM.
    *   *Tip: You can use `scp` or `rsync`.*

## Step 5: Configure Nginx
1.  Copy the provided `nginx-custom.conf` to `/etc/nginx/sites-available/admin`:
    ```bash
    sudo nano /etc/nginx/sites-available/admin
    ```
    *   Paste the content of `nginx-custom.conf`.
2.  Enable the site:
    ```bash
    sudo ln -s /etc/nginx/sites-available/admin /etc/nginx/sites-enabled/
    sudo rm /etc/nginx/sites-enabled/default  # Remove default site
    ```
3.  Test configuration:
    ```bash
    sudo nginx -t
    ```
4.  Restart Nginx:
    ```bash
    sudo systemctl restart nginx
    ```

## Step 6: Cloudflare SSL Mode
1.  In Cloudflare Dashboard > **SSL/TLS**.
2.  Set encryption mode to **Full (Strict)**.

## Verification
Visit `https://admin.tellevoapp.com`. It should load your Vue app securely, and API calls to `/api` should work without CORS errors.
